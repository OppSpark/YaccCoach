# 2주차 개발 보고서 2025년 03월 25일

## 진행 사항
### 도메인 및 인프라 구성
- 도메인 및 CloudFlare 연동
- YaccCoach 도메인을 구입하고 CloudFlare에 등록하여 DNS 설정을 완료하였습니다.
- CloudFlare를 통해 DDoS 보호, SSL/TLS 암호화 등의 보안 기능을 활성화하였습니다.
- NGINX 리버스 프록시 구축
- NGINX를 사용하여 외부 요청을 내부 Express 서버로 전달하는 리버스 프록시를 구성하였습니다.

### 2. 회원가입 기능 구현 (v2)
- 입력 데이터 유효성 검사
	- 사용자가 입력한 이메일, 비밀번호, 전화번호, 주소, 개인정보 동의 값 등 필수 정보에 대해 형식과 값의 유효성을 검사합니다.
	- 유효하지 않은 경우에는 구체적인 에러 메시지(예: “Invalid email format”, “Address too long” 등)를 반환합니다.
- 비밀번호 보안 강화
	- 사용자의 비밀번호는 추가 보안 문자열(pepper)와 함께 bcrypt를 사용해 해싱한 후 데이터베이스에 저장됩니다.
	- passHashSecurity.js 모듈을 활용하여 hashPassword() 함수를 통해 안전하게 암호화합니다.
	- 데이터베이스 저장 및 오류 처리
	- MySQL 데이터베이스에 사용자 정보를 저장하며, DB 에러 코드(예: ER_DUP_ENTRY, ER_DATA_TOO_LONG 등)에 따라 적절한 결과 메시지를 클라이언트에 반환합니다.
### 3. 로그인 기능 구현 
- 입력 및 검증
  - 클라이언트(React 앱)에서 로그인 폼에 이메일과 비밀번호를 입력 후 서버의 로그인 API로 전송합니다.
  - 서버는 입력된 데이터의 유효성을 검사하며, 올바르지 않은 경우 관련 오류 메시지를 반환합니다.
- 사용자 검증 및 비밀번호 비교
    - 서버는 데이터베이스에서 입력된 이메일에 해당하는 사용자를 조회합니다.
	- 사용자가 존재하지 않으면 “Email not found” 메시지를 반환합니다.
	- 사용자가 존재하는 경우, 저장된 해시화된 비밀번호와 클라이언트가 입력한 비밀번호를 passHashSecurity.comparePassword() 함수를 사용하여 pepper가 적용된 상태로 비교합니다.
	- 비밀번호가 일치하지 않으면 “Incorrect password” 메시지를 반환합니다.
- 세션 생성 및 유지
	- 비밀번호 검증이 완료되면, 사용자 정보를 req.session에 저장하여 로그인 상태를 유지합니다.
	- 세션에는 사용자 ID, 이름, 이메일 등의 정보가 저장되어, 이후 보호된 페이지나 API 접근 시 인증 정보를 확인하는 데 활용됩니다.
### 4. 로그아웃 기능 구현
- 로그아웃 요청 처리
	- 클라이언트에서 로그아웃 버튼 클릭 시, 로그아웃 API로 POST 요청을 보냅니다.
- 세션 파기 및 쿠키 제거
	- 서버는 해당 요청을 받아 현재의 세션을 파기하고(req.session.destroy), 세션 쿠키(예: “connect.sid”)를 삭제합니다.
	- 로그아웃이 완료되면, 더 이상 보호된 리소스에 접근할 수 없도록 하여 인증 상태를 해제합니다.
- 응답 반환
	- 로그아웃 성공 시, { result: "logout_success", message: "Logged out successfully." }와 같은 응답을 클라이언트에 반환합니다.
### 5. 효율적인 버전관리를 
- 효울적인 버전 관리를 위해 dev 브렌치를 생성하여 dev 브렌치에서 개발을 시작합니다.
